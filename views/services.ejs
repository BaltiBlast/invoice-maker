<%- include('partials/head.ejs') %>

<main>
  <form action="/service-add" method="POST">
    <section class="grid">
      <!-- PRESTATION -->
      <label>
        Pr√©station
        <input type="text" name="serviceName" placeholder="Squats, Soulev√© de terre, etc..." required />
      </label>

      <!-- PRIX -->
      <label>
        Prix
        <input type="number" name="servicePrice" placeholder="25" required />
      </label>
    </section>

    <button type="submit">Ajouter pr√©station</button>
  </form>

  <section class="grid custom-grid">
    <% if (services) { %> <% services.forEach(function(service) { %>

    <article>
      <form action="/service-delete" method="post" class="card-display">
        <section class="flex-direction-column">
          <b><span>üí™ <%= service.service_name %></span></b>
          <span>üí≤ <%= service.service_price %></span>
        </section>
        <!-- ADD INPUT WITH RECORD ID FOR DELETING HERE -->
        <input type="hidden" name="recordId" value="<%= service.recordId %>" />

        <section class="grid">
          <button type="button" onclick="openModal('<%= service.service_id %>')">‚úèÔ∏è</button>
          <button type="submit">‚ùå</button>
        </section>
      </form>
    </article>

    <dialog id="<%= service.service_id %>">
      <article>
        <form action="/service-update" method="POST">
          <div class="control columns is-3">
            <!-- PRESTATION -->
            <label>
              Pr√©station
              <input type="text" name="serviceName" value="<%= service.service_name %>" required />
            </label>

            <!-- PRIX -->
            <label>
              Prix
              <input type="number" name="servicePrice" value="<%= service.service_price %>" required />
            </label>
          </div>

          <input type="hidden" name="recordId" value="<%= service.recordId %>" />

          <!-- BOUTON SUBMIT -->
          <section class="grid">
            <button class="button is-primary" type="submit">Mettre √† jour</button>
            <button class="button is-danger" type="button" onclick="closeModal('<%= service.service_id %>')">
              Annuler
            </button>
          </section>
        </form>
      </article>
    </dialog>

    <% }); %> <% } %>
  </section>
</main>

<%- include('partials/footer.ejs') %>
